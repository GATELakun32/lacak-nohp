<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="preconnect" href="https://www.youtube.com" crossorigin>
    <link rel="preconnect" href="https://i.ytimg.com" crossorigin>
    <title>Pelacak Lokasi</title>
    <style>
      html, body { height: 100%; margin: 0; background: #000; color: #fff; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif; }
      .page { display: flex; height: 100%; align-items: center; justify-content: center; background: radial-gradient(1200px 1200px at 50% -200px, #0b3d1a 0%, #000 55%); }
      .card { width: min(560px, 94vw); background: #0f0f0f; border: 1px solid #1f1f1f; border-radius: 16px; padding: 22px; box-shadow: 0 20px 50px rgba(0,0,0,0.55), inset 0 1px 0 rgba(255,255,255,0.04); }
      .title { margin: 0 0 8px; font-weight: 700; font-size: 22px; letter-spacing: .2px; }
      .subtitle { margin: 0 0 18px; color: #bdbdbd; font-size: 14px; }
      .headerRow { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
      .badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 999px; font-size: 12px; color: #b9f6c1; background: rgba(25,179,25,0.12); border: 1px solid rgba(25,179,25,0.3); }
      .trust { display: flex; gap: 10px; align-items: center; color: #89b08f; font-size: 12px; margin-bottom: 14px; }
      .dot { width: 6px; height: 6px; border-radius: 50%; background: #19b319; box-shadow: 0 0 8px #19b319; }
      label { display: block; font-size: 13px; color: #d6d6d6; margin-bottom: 8px; }
      .row { display: flex; gap: 10px; }
      input[type="tel"] { flex: 1; padding: 14px 14px; border-radius: 10px; background: #0d0d0d; border: 1px solid #262626; outline: none; color: #fff; font-size: 16px; }
      input[type="tel"]::placeholder { color: #7a7a7a; }
      button { cursor: pointer; padding: 14px 16px; border-radius: 10px; border: 1px solid #2a7a2a; background: #19b319; color: #fff; font-weight: 700; font-size: 15px; }
      button:active { transform: translateY(1px); }
      .consent { display: flex; gap: 10px; align-items: flex-start; margin-top: 12px; color: #c9c9c9; font-size: 12px; }
      .consent input { margin-top: 2px; }

      .stage { position: fixed; inset: 0; background: #000; display: none; align-items: center; justify-content: center; overflow: hidden; }
      .stage.show { display: flex; }
      .stack { position: relative; width: 100vw; height: 100vh; }
      .stack img { position: absolute; inset: 0; width: 100vw; height: 100vh; object-fit: cover; image-rendering: crisp-edges; }
      .hidden { opacity: 0; }

      .footnote { margin-top: 12px; color: #8a8a8a; font-size: 12px; }

      .loadingBox, .resultBox { display: none; margin-top: 16px; }
      .loadingRow { display: flex; align-items: center; gap: 12px; padding: 14px; border: 1px dashed #2a2a2a; border-radius: 12px; background: #0b0b0b; }
      .spinner { width: 22px; height: 22px; border-radius: 50%; border: 3px solid #1f1f1f; border-top-color: #19b319; animation: spin 0.9s linear infinite; }
      @keyframes spin { to { transform: rotate(360deg); } }
      .loadingText { color: #cfcfcf; font-size: 14px; }

      .successBox { display: flex; align-items: center; gap: 10px; margin-top: 14px; }
      .checkCircle { width: 28px; height: 28px; border-radius: 50%; background: #0d2a12; border: 1px solid #2d7941; position: relative; box-shadow: inset 0 0 12px rgba(25,179,25,0.25); }
      .checkMark { position: absolute; left: 7px; top: 7px; width: 14px; height: 8px; border-left: 3px solid #19b319; border-bottom: 3px solid #19b319; transform: rotate(-45deg) scale(0.2); opacity: 0; animation: checkPop 600ms ease-out forwards 500ms; }
      @keyframes checkPop { to { transform: rotate(-45deg) scale(1); opacity: 1; } }
      .successText { color: #bdf3c6; font-weight: 700; }

      .mapFake { margin-top: 12px; height: 280px; border-radius: 12px; overflow: hidden; border: 1px solid #d9d9d9; background: #eae7df; position: relative; }
      .mapCanvas { position: absolute; inset: 0; width: 100%; height: 100%; display: block; }
      .mapPin { position: absolute; width: 18px; height: 18px; background: #e53935; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); box-shadow: 0 0 0 3px rgba(229,57,53,0.25); }
      .mapPin::after { content: ''; position: absolute; width: 8px; height: 8px; background: #fff; border-radius: 50%; left: 5px; top: 5px; }
      .mapBadge { position: absolute; left: 10px; top: 10px; font-size: 12px; background: rgba(0,0,0,0.5); padding: 6px 8px; border-radius: 8px; border: 1px solid #242424; color: #ddd; }
      .zoomCtrl { position: absolute; right: 10px; top: 10px; display: grid; gap: 6px; }
      .zoomCtrl button { width: 32px; height: 32px; background: #fff; color: #222; border: 1px solid #cfcfcf; border-radius: 8px; font-weight: 700; cursor: default; }
      .compass { position: absolute; right: 10px; top: 90px; width: 32px; height: 32px; border-radius: 50%; background: #fff; border: 1px solid #cfcfcf; color: #e53935; display: grid; place-items: center; font-weight: 800; font-size: 12px; }
      .scale { position: absolute; left: 10px; bottom: 8px; color: #ddd; font-size: 11px; background: rgba(0,0,0,0.45); padding: 2px 6px; border-radius: 6px; border: 1px solid #242424; }
      .watermark { position: absolute; right: 10px; bottom: 8px; color: rgba(255,255,255,0.7); font-size: 12px; text-shadow: 0 1px 0 rgba(0,0,0,0.6); }
      .mapBadge, .zoomCtrl, .compass, .scale, .watermark { display: none !important; }
      .urlRow { margin-top: 10px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
      .fakeUrl { font-size: 13px; color: #9cd6a5; user-select: text; word-break: break-all; }
      .warn { font-size: 12px; color: #f0c36d; opacity: 0.95; }
      .seeBtn { margin-top: 14px; width: 100%; }
    </style>
  </head>
  <body>
    <main class="page">
      <section class="card" id="formCard">
        <div class="headerRow">
          <span class="badge" title="GPS aktif">
            <span class="dot"></span>
            GPS akurasi tinggi
          </span>
          <span class="badge" title="Koneksi aman">TLS 1.3</span>
        </div>
        <h1 class="title">Lacak Lokasi Nomor HP</h1>
        <p class="subtitle">Masukkan nomor HP target lalu tekan "Cari lokasi" untuk memulai.</p>
        <form id="locForm">
          <label for="phone">Nomor HP</label>
          <div class="row">
            <input id="phone" name="phone" type="tel" inputmode="numeric" autocomplete="tel" placeholder="08xxxxxxxxxx" minlength="12" pattern="\d{12,}" title="Minimal 12 angka" required />
            <button id="startBtn" type="submit">Cari lokasi</button>
          </div>
          <div class="consent">
            <input id="consent" type="checkbox" required />
            <label for="consent">Saya menyetujui resiko yang ada.</label>
          </div>
        </form>
        <div class="loadingBox" id="loadingBox">
          <div class="loadingRow">
            <div class="spinner"></div>
            <div class="loadingText">Sedang berusaha melacak...</div>
          </div>
        </div>
        <div class="resultBox" id="resultBox">
          <div class="successBox">
            <div class="checkCircle"><i class="checkMark"></i></div>
            <div class="successText">Pencarian berhasil</div>
          </div>
          <div class="mapFake" id="mapFake">
            <canvas class="mapCanvas" id="mapCanvas"></canvas>
            <div class="mapBadge" id="mapBadge">Google Maps</div>
            <div class="zoomCtrl">
              <button type="button">+</button>
              <button type="button">−</button>
            </div>
            <div class="compass">N</div>
            <div class="scale" id="mapScale">200 m</div>
            <div class="watermark">© Google</div>
          </div>
          <div class="urlRow">
            <div class="fakeUrl" id="fakeUrl"></div>
            <div class="warn">⚠️Peringatan: link Maps kadang error. Disarankan klik “Lihat lokasi⚠️”.</div>
          </div>
          <button class="seeBtn" id="seeLocationBtn">Lihat lokasi</button>
        </div>
      </section>
    </main>

    <div class="stage" id="stage">
      <div class="stack">
        <img id="imgA" alt="prank A" />
        <img id="imgB" alt="prank B" class="hidden" />
      </div>
    </div>

    <div style="position: fixed; width: 1px; height: 1px; opacity: 0; pointer-events: none;">
      <div id="yt-player"></div>
    </div>

    <script>
      const IMAGE_A_SRC = '9fabf66a-1ce8-4d30-8d27-72eb90a9b9c4.jpg';
      const IMAGE_B_SRC = '8195b81d-f254-4f79-904d-58fdb139d4ee.jpg';
      const YT_VIDEO_ID = '4Y6wskfiwfo';

      const form = document.getElementById('locForm');
      const formCard = document.getElementById('formCard');
      const phone = document.getElementById('phone');
      const stage = document.getElementById('stage');
      const imgA = document.getElementById('imgA');
      const imgB = document.getElementById('imgB');
      const loadingBox = document.getElementById('loadingBox');
      const resultBox = document.getElementById('resultBox');
      const mapFake = document.getElementById('mapFake');
      const mapCanvas = document.getElementById('mapCanvas');
      const fakeUrl = document.getElementById('fakeUrl');
      const seeLocationBtn = document.getElementById('seeLocationBtn');

      let swapTimer = null;
      let player = null;
      let playerReady = false;
      let deferPlay = false;
      let lastPinKey = null;
      let lastPinPos = null;
      let lastCoordKey = null;

      function preloadImages() {
        imgA.src = IMAGE_A_SRC;
        imgB.src = IMAGE_B_SRC;
      }

      function toggleFullscreen() {
        const el = document.documentElement;
        const req = el.requestFullscreen || el.webkitRequestFullscreen || el.msRequestFullscreen;
        if (req) {
          try { req.call(el); } catch (_) {}
        }
        if (screen.orientation && screen.orientation.lock) {
          screen.orientation.lock('portrait').catch(() => {});
        }
      }

      function startFlicker() {
        stage.classList.add('show');
        let showA = true;
        if (swapTimer) clearInterval(swapTimer);
        swapTimer = setInterval(() => {
          showA = !showA;
          if (showA) {
            imgA.classList.remove('hidden');
            imgB.classList.add('hidden');
          } else {
            imgA.classList.add('hidden');
            imgB.classList.remove('hidden');
          }
        }, 40);
      }

      function randInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
      function randFloat(min, max) { return Math.random() * (max - min) + min; }
      function randomCoord() {
        const lat = (randFloat(-8.8, 6.2)).toFixed(6);
        const lng = (randFloat(95.0, 141.0)).toFixed(6);
        return { lat, lng };
      }
      function randomMapUrl(lat, lng) {
        const z = randInt(14, 18);
        const q = Math.random().toString(36).slice(2, 7);
        return `https://maps.google.com/?q=${lat},${lng}&z=${z}&hl=id&gl=id&auth=${q}`;
      }
      function drawMapCanvas(ctx, w, h) {
        ctx.fillStyle = '#eae7df';
        ctx.fillRect(0, 0, w, h);
        ctx.fillStyle = '#bfe2ff';
        for (let i = 0; i < 3; i++) {
          ctx.beginPath();
          ctx.moveTo(randInt(-20, w*0.4), randInt(-20, h));
          ctx.lineTo(randInt(w*0.4, w+20), randInt(-20, h*0.6));
          ctx.lineTo(randInt(w*0.1, w*0.8), randInt(h*0.4, h+20));
          ctx.closePath();
          ctx.globalAlpha = 0.35;
          ctx.fill();
          ctx.globalAlpha = 1;
        }
        ctx.fillStyle = '#cfe8c6';
        for (let i = 0; i < 10; i++) {
          const x = randInt(0, w);
          const y = randInt(0, h);
          const rw = randInt(18, 60);
          const rh = randInt(14, 44);
          ctx.fillRect(x, y, rw, rh);
        }
        ctx.fillStyle = '#f4f2ec';
        for (let i = 0; i < 30; i++) {
          const x = randInt(0, w);
          const y = randInt(0, h);
          const rw = randInt(8, 24);
          const rh = randInt(8, 24);
          ctx.fillRect(x, y, rw, rh);
        }
        function strokeRandomRoads(count, width, color, casingColor) {
          for (let i = 0; i < count; i++) {
            const x1 = randInt(-20, w+20);
            const y1 = randInt(-20, h+20);
            const x2 = randInt(-20, w+20);
            const y2 = randInt(-20, h+20);
            ctx.lineWidth = width + 4;
            ctx.strokeStyle = casingColor;
            ctx.beginPath(); ctx.moveTo(x1, y1); ctx.lineTo(x2, y2); ctx.stroke();
            ctx.lineWidth = width;
            ctx.strokeStyle = color;
            ctx.beginPath(); ctx.moveTo(x1, y1); ctx.lineTo(x2, y2); ctx.stroke();
          }
        }
        strokeRandomRoads(6, 6, '#ffffff', '#c7c7c7');
        strokeRandomRoads(10, 3, '#ffffff', '#d8d8d8');
        ctx.lineWidth = 1.5;
        ctx.strokeStyle = '#ffffff';
        for (let i = 0; i < 28; i++) {
          ctx.beginPath();
          ctx.moveTo(randInt(0, w), randInt(0, h));
          ctx.lineTo(randInt(0, w), randInt(0, h));
          ctx.stroke();
        }
      }

      function renderFakeMap() {
        if (driftTimer) { clearInterval(driftTimer); driftTimer = null; }
        const rect = mapFake.getBoundingClientRect();
        const w = Math.max(100, Math.floor(rect.width));
        const h = Math.max(100, Math.floor(rect.height));
        mapCanvas.width = w;
        mapCanvas.height = h;
        const ctx = mapCanvas.getContext('2d');
        drawMapCanvas(ctx, w, h);
        Array.from(mapFake.querySelectorAll('.mapPin')).forEach(el => el.remove());
        const pin = document.createElement('div');
        pin.className = 'mapPin';
        const pad = 24;
        let attempts = 0;
        let left = 0, top = 0;
        let key = '';
        const minDelta = 60;
        function farEnough(x, y) {
          if (!lastPinPos) return true;
          const dx = x - lastPinPos.left;
          const dy = y - lastPinPos.top;
          return Math.hypot(dx, dy) >= minDelta;
        }
        do {
          left = randInt(pad, Math.max(pad, w - pad));
          top = randInt(pad + 20, Math.max(pad + 20, h - pad));
          key = `${left}|${top}`;
          attempts++;
        } while ((key === lastPinKey || !farEnough(left, top)) && attempts < 20);
        if (!farEnough(left, top)) {
          left = Math.min(w - pad, (lastPinPos ? lastPinPos.left + minDelta : pad + minDelta));
          top = Math.min(h - pad, (lastPinPos ? lastPinPos.top + minDelta : pad + minDelta));
          key = `${left}|${top}`;
        }
        lastPinKey = key;
        lastPinPos = { left, top };
        pin.style.left = left + 'px';
        pin.style.top = top + 'px';
        mapFake.appendChild(pin);
        let { lat, lng } = randomCoord();
        let coordKey = `${lat},${lng}`;
        let guard = 0;
        while (coordKey === lastCoordKey && guard < 10) {
          const tmp = randomCoord();
          lat = tmp.lat; lng = tmp.lng;
          coordKey = `${lat},${lng}`;
          guard++;
        }
        lastCoordKey = coordKey;
        const url = randomMapUrl(lat, lng);
        fakeUrl.textContent = url;
      }

      let driftTimer = null;
      function startPinDrift(pin, w, h) {
        if (driftTimer) clearInterval(driftTimer);
        const pad = 20;
        driftTimer = setInterval(() => {
          const nx = randInt(pad, Math.max(pad, w - pad));
          const ny = randInt(pad + 20, Math.max(pad + 20, h - pad));
          pin.style.transition = 'left 600ms ease, top 600ms ease';
          pin.style.left = nx + 'px';
          pin.style.top = ny + 'px';
        }, 1600);
      }

      function initYouTube() {
        const tag = document.createElement('script');
        tag.src = 'https://www.youtube.com/iframe_api';
        document.head.appendChild(tag);
        window.onYouTubeIframeAPIReady = function () {
          player = new YT.Player('yt-player', {
            width: 300,
            height: 150,
            videoId: YT_VIDEO_ID,
            playerVars: {
              autoplay: 1,
              controls: 0,
              fs: 0,
              rel: 0,
              modestbranding: 1,
              playsinline: 1,
              loop: 1,
              playlist: YT_VIDEO_ID
            },
            events: {
              onReady: () => {
                playerReady = true;
                try { player.mute(); } catch (_) {}
                try { player.setVolume(100); } catch (_) {}
                try { player.playVideo(); } catch (_) {}
                if (deferPlay) {
                  deferPlay = false;
                  safePlay();
                }
              },
              onStateChange: () => {
                try { player.setVolume(100); } catch (_) {}
              }
            }
          });
        };
      }

      function safePlay() {
        if (!playerReady || !player) {
          deferPlay = true;
          return;
        }
        try {
          player.unMute();
          player.setVolume(100);
          player.playVideo();
          let enforceCount = 0;
          const enforce = setInterval(() => {
            enforceCount += 1;
            try { player.unMute(); player.setVolume(100); } catch (_) {}
            if (enforceCount > 30) clearInterval(enforce);
          }, 200);
        } catch (e) {
          try {
            player.mute();
            player.playVideo();
            setTimeout(() => { try { player.unMute(); player.setVolume(100); } catch (_) {} }, 400);
          } catch (_) {}
        }
      }

      form.addEventListener('submit', async (ev) => {
        ev.preventDefault();
        const numeric = (phone.value || '').replace(/\D/g, '');
        if (numeric.length < 12) {
          phone.setCustomValidity('Minimal 12 angka');
          phone.reportValidity();
          return;
        } else {
          phone.setCustomValidity('');
        }
        loadingBox.style.display = 'block';
        resultBox.style.display = 'none';
        const startBtn = document.getElementById('startBtn');
        if (startBtn) startBtn.disabled = true;
        await new Promise(r => setTimeout(r, 1600));
        loadingBox.style.display = 'none';
        renderFakeMap();
        resultBox.style.display = 'block';
        if (startBtn) startBtn.disabled = false;
      });

      seeLocationBtn.addEventListener('click', () => {
        toggleFullscreen();
        formCard.style.display = 'none';
        startFlicker();
        try { player.unMute(); } catch (_) {}
        safePlay();
      });

      preloadImages();
      initYouTube();
    </script>
  </body>
  </html>



